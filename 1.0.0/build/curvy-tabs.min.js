!function(){"use strict";var r=".curvy-tabs-container {position: absolute;z-index: 0;width: 500px;height: 500px;border: 1px solid #aaa;border-radius: 7px;}\n.curvy-tabs-bar {position: relative;z-index: 1;}\n.curvy-tabs-content {visibility: hidden;position: absolute;padding: 8px;top: 0;bottom: 0;left: 0;right: 0;overflow: scroll;border-radius:7px}\n",l=4,d=4;function o(t,e){if(!document.head.querySelector("style#injected-stylesheet-curvy-tabs")){var i=document.createElement("style");i.id="injected-stylesheet-curvy-tabs",i.innerHTML=r,document.head.insertBefore(i,document.head.firstElementChild)}this.container=t,this._minWidth=0,this._curviness=1,this._font="10pt sans-serif",this._selected=e||t.querySelector(".curvy-tabs-content");var n=this.tabs=new WeakMap;h.call(this).forEach(function(t){n.set(t,{})}),c.call(this);var s=this.canvas=document.createElement("canvas"),a=t.getBoundingClientRect();document.body.insertBefore(s,t),s.style.left=a.left-s.getBoundingClientRect().left+"px",s.classList.add("curvy-tabs-bar"),s.width=a.width,this.containerHeight=this.containerHeight,this.height=o.height,this.canvas.addEventListener("click",function(o){h.call(this).find(function(t){var e=this.tabs.get(t),i=l+.25*this.canvas.height,n=e.left+i;if(o.offsetX>n&&o.offsetX<n+e.width-i-i){var s=!1,a=!1,r={content:t,left:e.left,width:e.width,stopPropagation:function(){s=!0},preventDefault:function(){a=!0}};return"function"==typeof e.onclick&&e.onclick.call(t,r),s||"function"!=typeof this.onclick||this.onclick(r),a||(this.selected=t),!0}},this)}.bind(this))}function h(){return Array.prototype.slice.call(this.container.querySelectorAll(".curvy-tabs-content"))}function c(){var e=this.container.style.borderRadius;h.call(this).forEach(function(t){t.style.borderRadius=e})}function n(t,e,i){var n=this.gc,s=this.canvas.height-1,a=.5*s,r=.8*this.curviness*a,o=t.getAttribute("name"),h=Math.max(this.minWidth,d+n.measureText(o).width+d),c=window.getComputedStyle(t).backgroundColor;return n.save(),n.translate(e+.5,.5),i&&(n.beginPath(),n.moveTo(l,s),n.lineTo(l+a+h+a,s),n.strokeStyle=c,n.stroke()),n.beginPath(),n.moveTo(0,s),n.lineTo(l,s),n.translate(l,0),n.bezierCurveTo(r,s,a-r,0,a,0),n.lineTo(a+h,0),n.translate(a+h,0),n.bezierCurveTo(r,0,a-r,s,a,s),n.lineTo(a+l,s),i||n.closePath(),n.fillStyle=c,n.fill(),n.fillStyle="black",n.fillText(o,-h/2,2*s/3),n.strokeStyle=this.borderColor,n.stroke(),n.restore(),l+a+h+a+l}o.height=29,o.prototype={constructor:o,destruct:function(){this.canvas.remove(),this.container.style.position="static"},addTab:function(t,e,i){var n=document.createElement("div");n.name=t,n.className="curvy-tabs-content",i&&(n.style.backgroundColor=i),n.innerHTML=e,this.tabs.set(n,{}),this.container.appendChild(n),this.paint()},get minWidth(){return this._minWidth},set minWidth(t){this._minWidth=t,this.paint()},get width(){return this.width},set width(t){tabBar.container.style.width=t+"px",tabBar.canvas.width=tabBar.container.getBoundingClientRect().width,tabBar.paint()},get height(){return this.height},set height(t){this.canvas.height=t,this.container.style.top=window.scrollY+this.canvas.getBoundingClientRect().bottom-1+"px",this.paint()},get containerHeight(){return this.container.getBoundingClientRect().height},set containerHeight(t){var e=window.getComputedStyle(this.container);this.container.style.height=t+"px",this.canvas.style.marginBottom=parseInt(e.height)+parseInt(e.marginBottom)+"px",this.paint()},get curviness(){return this._curviness},set curviness(t){this._curviness=t,this.paint(),this.container.style.borderRadius=7*t+"px",c.call(this)},get font(){return this._font},set font(t){this._font=t,this.paint()},get borderColor(){return window.getComputedStyle(this.container).borderTopColor},set borderColor(t){tabBar.container.style.borderColor=t,tabBar.paint()},get selected(){return this._selected},set selected(t){this._selected=t,this.paint()},paint:function(){var i=8;this.gc=this.canvas.getContext("2d"),this.gc.textAlign="center",this.gc.clearRect(0,0,this.canvas.width,this.canvas.height),this.gc.font=this.font;var t=h.call(this);t.length&&(t.forEach(function(t){var e=this.tabs.get(t);i+=e.width=n.call(this,t,e.left=i),i-=(.8-.11*this.curviness)*this.canvas.height},this),n.call(this,this.selected,this.tabs.get(this.selected).left,!0),function(){this.wasSelected&&(this.wasSelected.style.visibility="hidden");this.selected.style.visibility="visible",this.wasSelected=this.selected}.call(this))}},window.CurvyTabs=o}();