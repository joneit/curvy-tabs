!function(){"use strict";var r=".curvy-tabs-container {position: relative;width: 500px;height: 500px;}\n.curvy-tabs-container > div {position: absolute;left: 0;bottom: 0;right: 0;border: 1px solid #aaa;border-radius: 7px;}\n.curvy-tabs-container > div > * {position: absolute;display: block;visibility: hidden;padding: 8px;top: 0;bottom: 0;left: 0;right: 0;overflow: scroll;border-radius: 7px;}\n.curvy-tabs-container > canvas {position: absolute;}\n",d=4,u=4,f="rgba(0, 0, 0, 0)";function c(t,e){!function(){if(!document.head.querySelector("style#injected-stylesheet-curvy-tabs")){var t=document.createElement("style");t.id="injected-stylesheet-curvy-tabs",t.innerHTML=r,document.head.insertBefore(t,document.head.firstElementChild)}}();var i=Array.prototype.slice.call(t.children);this.container=t,this._minWidth=0,this._curviness=1,this._font="10pt sans-serif",this._selected=e||i[0];var s=this.contents=document.createElement("div");i.forEach(function(t){s.appendChild(t)}),t.appendChild(s);var n=this.tabs=new WeakMap;this.contentDivs.forEach(function(t){n.set(t,{})}),a.call(this);var h=t.getBoundingClientRect(),o=this.canvas=document.createElement("canvas");t.appendChild(o),o.width=h.width,this.size=c.size,this.height=this.height,this.canvas.addEventListener("click",function(r){this.contentDivs.find(function(t){var e=this.tabs.get(t),i=d+.25*this.size,s=e.left+i;if(r.offsetX>s&&r.offsetX<s+e.width-i-i){var n=!1,h=!1,o={content:t,left:e.left,width:e.width,stopPropagation:function(){n=!0},preventDefault:function(){h=!0}};return"function"==typeof e.onclick&&e.onclick.call(t,o),n||"function"!=typeof this.onclick||this.onclick(o),h||(this.selected=t),!0}},this)}.bind(this))}function s(t,e,i){var s=t.style;if("object"!=typeof e||Array.isArray(e)){if(3===arguments.length)s[e]=i;else if(2===arguments.length)return Array.isArray(e)?e.reduce(function(t,e){return t[e]=s[e],t},{}):window.getComputedStyle(t)[e]}else Object.keys(e).forEach(function(t){s[t]=e[t]})}function a(){var e=this.contents.style.borderRadius;this.contentDivs.forEach(function(t){t.style.borderRadius=e})}function v(){return window.getComputedStyle(this.contents)}function p(){return parseFloat(v.call(this).borderWidth)}function n(t,e,i){for(var s=this.gc,n=this.size-1,h=.5*n,o=.8*this.curviness*h,r=t.getAttribute("name"),c=Math.max(this.minWidth,u+s.measureText(r).width+u),a=t,l=f;l===f;a=a.parentElement)if(l=window.getComputedStyle(a).backgroundColor,a===document.body){l===f&&(l="white");break}return s.save(),s.translate(e+.5,.5),s.lineWidth=p.call(this),i&&(s.beginPath(),s.moveTo(d,n),s.lineTo(d+h+c+h,n),s.strokeStyle=l,s.stroke()),s.beginPath(),s.moveTo(0,n),s.lineTo(d,n),s.translate(d,0),s.bezierCurveTo(o,n,h-o,0,h,0),s.lineTo(h+c,0),s.translate(h+c,0),s.bezierCurveTo(o,0,h-o,n,h,n),s.lineTo(h+d,n),i||s.closePath(),s.fillStyle=l,s.fill(),s.fillStyle="black",s.fillText(r,-c/2,2*n/3),s.strokeStyle=v.call(this).borderColor,s.stroke(),s.restore(),d+h+c+h+d}c.size=29,c.prototype={constructor:c,addTab:function(t,e,i){var s=document.createElement("div");s.setAttribute("name",t),e&&(s.innerHTML=e),i&&(s.style.backgroundColor=i),this.tabs.set(s,{}),this.contents.appendChild(s),this.selected=s,this.paint()},get contentDivs(){return Array.prototype.slice.call(this.contents.children)},get minWidth(){return this._minWidth},set minWidth(t){this._minWidth=t,this.paint()},get width(){return this.width},set width(t){tabBar.container.style.width=t+"px",tabBar.canvas.width=tabBar.container.getBoundingClientRect().width,tabBar.paint()},get size(){return this.canvas.height},set size(t){this.canvas.height=t,this.contents.style.top=t-1+"px",this.paint()},get height(){return this.container.getBoundingClientRect().height},set height(t){this.container.style.height=t+"px",this.contents.style.top=this.size-p.call(this)+"px",this.paint()},get curviness(){return this._curviness},set curviness(t){this._curviness=t,this.paint(),this.contents.style.borderRadius=7*t+"px",a.call(this)},get font(){return this._font},set font(t){this._font=t,this.paint()},get selected(){return this._selected},set selected(t){this._selected=t,this.paint()},css:function(t,e){s.call(this,this.contents,t,e),this.height=this.height},contentCss:function(e,i){this.contentDivs.forEach(function(t){s.call(this,t,e,i)})},paint:function(){var i=8;this.gc=this.canvas.getContext("2d"),this.gc.textAlign="center",this.gc.clearRect(0,0,this.canvas.width,this.size),this.gc.font=this.font;var t=this.contentDivs;t.length&&(t.forEach(function(t){var e=this.tabs.get(t);i+=e.width=n.call(this,t,e.left=i),i-=(.8-.11*this.curviness)*this.size},this),n.call(this,this.selected,this.tabs.get(this.selected).left,!0),function(){this.wasSelected&&(this.wasSelected.style.visibility="hidden");this.selected.style.visibility="visible",this.wasSelected=this.selected}.call(this))}},window.CurvyTabs=c}();