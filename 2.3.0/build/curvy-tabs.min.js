!function(){"use strict";var h=".curvy-tabs-container {position: relative;width: 500px;height: 500px;}\n.curvy-tabs-container > div {position: absolute;left: 0;bottom: 0;right: 0;border: 1px solid #aaa;border-radius: 7px;}\n.curvy-tabs-container > div > * {position: absolute;display: block;visibility: hidden;padding: 8px;top: 0;bottom: 0;left: 0;right: 0;overflow: scroll;border-radius: 7px;}\n.curvy-tabs-container > canvas {position: absolute;}\n",d=4,u=4,f="rgba(0, 0, 0, 0)";function r(t,e){!function(){if(!document.head.querySelector("style#injected-stylesheet-curvy-tabs")){var t=document.createElement("style");t.id="injected-stylesheet-curvy-tabs",t.innerHTML=h,document.head.insertBefore(t,document.head.firstElementChild)}}();var i=Array.prototype.slice.call(t.children);this.container=t,this._minWidth=0,this._curviness=1,this._font="10pt sans-serif",this._selected=e||i[0];var n=this.contents=document.createElement("div");i.forEach(function(t){t.dataset.display=window.getComputedStyle(t).display,n.appendChild(t)}),t.appendChild(n);var s=this.tabs=new WeakMap;this.contentDivs.forEach(function(t){s.set(t,{})}),c.call(this);var o=t.getBoundingClientRect(),a=this.canvas=document.createElement("canvas");t.appendChild(a),a.width=o.width,this.size=r.size,this.height=this.height,this.canvas.addEventListener("click",function(h){this.contentDivs.find(function(t){var e=this.tabs.get(t),i=d+.25*this.size,n=e.left+i;if(h.offsetX>n&&h.offsetX<n+e.width-i-i){var s=!1,o=!1,a={content:t,left:e.left,width:e.width,stopPropagation:function(){s=!0},preventDefault:function(){o=!0}};return"function"==typeof e.onclick&&e.onclick.call(t,a),s||"function"!=typeof this.onclick||this.onclick(a),o||(this.selected=t),!0}},this)}.bind(this))}function n(t,e,i){var n=t.style;if("object"!=typeof e||Array.isArray(e)){if(3===arguments.length)n[e]=i;else if(2===arguments.length)return Array.isArray(e)?e.reduce(function(t,e){return t[e]=n[e],t},{}):window.getComputedStyle(t)[e]}else Object.keys(e).forEach(function(t){n[t]=e[t]})}function c(){var e=this.contents.style.borderRadius;this.contentDivs.forEach(function(t){t.style.borderRadius=e})}function p(){return window.getComputedStyle(this.contents)}function g(){return parseFloat(p.call(this).borderWidth)}function s(t,e,i){for(var n=this.gc,s=this.size-1,o=.5*s,a=.8*this.curviness*o,h=t.getAttribute("name"),r=Math.max(this.minWidth,u+n.measureText(h).width+u),c=t,l=f;l===f;c=c.parentElement)if(l=window.getComputedStyle(c).backgroundColor,c===document.body){l===f&&(l="white");break}return n.save(),n.translate(e+.5,.5),n.lineWidth=g.call(this),i&&(n.beginPath(),n.moveTo(d,s),n.lineTo(d+o+r+o,s),n.strokeStyle=l,n.stroke()),n.beginPath(),n.moveTo(0,s),n.lineTo(d,s),n.translate(d,0),n.bezierCurveTo(a,s,o-a,0,o,0),n.lineTo(o+r,0),n.translate(o+r,0),n.bezierCurveTo(a,0,o-a,s,o,s),n.lineTo(o+d,s),i||n.closePath(),n.fillStyle=l,n.fill(),n.fillStyle="black",n.fillText(h,-r/2,2*s/3),n.strokeStyle=p.call(this).borderColor,n.stroke(),n.restore(),d+o+r+o+d}r.size=29,r.prototype={constructor:r,addTab:function(t,e,i){var n=document.createElement("div");n.setAttribute("name",t),e&&(n.innerHTML=e),i&&(n.style.backgroundColor=i),n.dataset.display=window.getComputedStyle(n).display,this.tabs.set(n,{}),this.contents.appendChild(n),this.selected=n,this.paint()},getTab:function(t){var e;if(t instanceof HTMLElement)e=t;else if(!(e="number"==typeof t?this.contents.children[t]:this.contents.querySelector('[name="'+t+'"]')))throw new ReferenceError("Cannot find specified tab: "+indexOrName);return e},get contentDivs(){return Array.prototype.slice.call(this.contents.children)},forEach:function(t){this.contenDivs.forEach(t)},get minWidth(){return this._minWidth},set minWidth(t){this._minWidth=t,this.paint()},get width(){return this.width},set width(t){tabBar.container.style.width=t+"px",tabBar.canvas.width=tabBar.container.getBoundingClientRect().width,tabBar.paint()},get size(){return this.canvas.height},set size(t){this.canvas.height=t,this.contents.style.top=t-1+"px",this.paint()},get height(){return this.container.getBoundingClientRect().height},set height(t){this.container.style.height=t+"px",this.contents.style.top=this.size-g.call(this)+"px",this.paint()},get curviness(){return this._curviness},set curviness(t){this._curviness=t,this.paint(),this.contents.style.borderRadius=7*t+"px",c.call(this)},get font(){return this._font},set font(t){this._font=t,this.paint()},get selected(){return this._selected},set selected(t){this._selected=t,this.paint()},select:function(t){this.selected=this.getTab(t)},clear:function(t){for(var e=this.getTab(t);e.hasChildNodes();)e.removeChild(e.lastChild)},hide:function(t){this.toggle(t,!1)},show:function(t){this.toggle(t,!0)},toggle:function(t,e){var i=this.getTab(t);void 0===e&&(e="none"===window.getComputedStyle(i).display),e||i!==this.selected?(i.style.display=e?"block":"none",this.paint()):console.warn("Attempt to hide currently selected tab ignored.")},reset:function(e){this.contentDivs.forEach(function(t){e?t.dataset.display=window.getComputedStyle(t).display:this.toggle(t,"none"!==t.dataset.display)},this)},css:function(t,e){n.call(this,this.contents,t,e),this.height=this.height},contentCss:function(e,i){this.contentDivs.forEach(function(t){n.call(this,t,e,i)})},paint:function(){var i=8;this.gc=this.canvas.getContext("2d"),this.gc.textAlign="center",this.gc.clearRect(0,0,this.canvas.width,this.size),this.gc.font=this.font;var t=this.contentDivs.filter(function(t){return"block"===window.getComputedStyle(t).display});t.length&&(t.forEach(function(t){var e=this.tabs.get(t);i+=e.width=s.call(this,t,e.left=i),i-=(.8-.11*this.curviness)*this.size},this),s.call(this,this.selected,this.tabs.get(this.selected).left,!0),function(){this.wasSelected&&(this.wasSelected.style.visibility="hidden");this.selected.style.visibility="visible",this.wasSelected=this.selected}.call(this))}},r.version="2.2.0",window.CurvyTabs=r}();